apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "nginx-ingress.configName" . }}
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "nginx-ingress.labels" . | nindent 4 }}
data:
    stream-snippets:
      upstream mqtt-tcp-server {
          server opensync-wifi-controller-opensync-mqtt-broker.connectus.svc.cluster.local:1883;
      }
      upstream controller-tcp-server {
          server opensync-wifi-controller-opensync-gw-static.connectus.svc.cluster.local:6640;
      }
      upstream redirector-tcp-server {
          server opensync-wifi-controller-opensync-gw-static.connectus.svc.cluster.local:6643;
      }
      server {
          listen 1883;
          proxy_pass mqtt-tcp-server;
      }
      server {
          listen 6640;
          proxy_pass controller-tcp-server;
      }
      server {
          listen 6643;
          proxy_pass redirector-tcp-server;
      }
